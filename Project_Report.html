<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Project Report</title>

<script src="site_libs/header-attrs-2.29/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cosmo.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.13.2/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-6.5.2/css/all.min.css" rel="stylesheet" />
<link href="site_libs/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>









<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Home</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="Data_Preparation.html">Data Source &amp; Prepartion</a>
</li>
<li>
  <a href="Descriptive_Analysis.html">Descriptive Analysis</a>
</li>
<li>
  <a href="Model.html">Model</a>
</li>
<li>
  <a href="Project_Report.html">Project Report</a>
</li>
<li>
  <a href="mailto:&lt;you@youremail.com&gt;">
    <span class="fa fa-envelope fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/Huiyi-hz3023/Final-Project">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Project Report</h1>

</div>


<div id="motivation" class="section level2">
<h2>Motivation</h2>
<p>New York sells itself on vibrant public life—but a city’s real
magnetism shows up in how well it shares its spaces and resources.
Understanding what drives public participation in community events is
essential for effective urban planning and equitable resource
allocation. NYC Parks hosts thousands of special events each year, yet
attendance varies widely across neighborhoods, seasons, and program
types. These patterns matter because well-attended events strengthen
community engagement, promote physical activity, and ensure that public
resources are used efficiently. At the same time, imbalances in
participation may reflect disparities in accessibility or programming
that does not fully meet community needs. By identifying the conditions
associated with higher participation, we aim to provide insights that
can help guide more inclusive and effective public programming in New
York City.</p>
</div>
<div id="related-work" class="section level2">
<h2>Related Work</h2>
<p>Research on urban park systems has shown that park accessibility,
quality, and programming play an important role in shaping community
engagement and wellbeing. For example, <a
href="https://journals.plos.org/plosone/article?id=10.1371/journal.pone.0012939"><em>Public
Parks and Wellbeing in Urban Areas of the United States</em></a> found
that cities with more extensive and accessible park resources tend to
report higher levels of physical, social, and emotional wellbeing among
residents. This work highlights the broader importance of understanding
how public spaces are used and motivates our focus on identifying the
factors that drive attendance at NYC Parks special events.</p>
</div>
<div id="initial-questions" class="section level2">
<h2>Initial Questions</h2>
<p>At the start of our project, we were interested in understanding what
factors influence participation in public events hosted by NYC Parks.
Our initial guiding question was: <strong>Which characteristics of an
event—such as season, borough, time of day, and intended
audience—predict higher attendance?</strong> As we explored the dataset
more deeply, this question evolved. We discovered that the audience
variable was inconsistently recorded, prompting us to rethink how to
capture who an event is designed for. This led us to formulate new
questions, such as whether events that are more “kids-friendly,”
“senior-friendly,” or “adults-only” tend to attract larger or smaller
crowds. During exploratory analysis, additional questions emerged: Do
certain boroughs consistently host higher-attended events? Are seasonal
patterns stronger for some types of events than others? Does the timing
of the event interact with audience type to influence turnout? These
evolving questions guided both our descriptive analyses and our final
modeling strategy.</p>
</div>
<div id="data" class="section level2">
<h2>Data</h2>
<ul>
<li><strong>Primary dataset:</strong> We used the <a
href="https://data.cityofnewyork.us/Recreation/Parks-Special-Events/6v4b-5gp4/about_data"><em>Parks
Special Events</em></a> dataset from NYC Open Data, which documents
thousands of public events hosted across New York City parks. The
dataset includes information on event type, date and time, location,
audience, and estimated attendance. Because the dataset changes over
time as new events are added, we downloaded a static <a
href="Parks_Special_Events_20251204.csv">CSV</a> to ensure full
reproducibility of our analysis.</li>
</ul>
<p>To prepare the data for analysis, we performed several cleaning and
transformation steps in R:</p>
<ul>
<li><p><strong>Standardizing structure:</strong> We applied
<code>janitor::clean_names()</code> to create consistent variable names
and converted the event datetime into structured components, including:
<code>date</code>, <code>year</code>, <code>month</code>,
<code>day</code>, and <code>time</code>.</p></li>
<li><p><strong>Key predictors:</strong> A four-level <code>season</code>
variable was created based on the event month (Spring: Mar–May, Summer:
Jun–Aug, Fall: Sep–Nov, Winter: Dec–Feb). A categorical
<code>time_period</code> variable (Morning, Afternoon, Night, Midnight)
was derived from the event start hour. To characterize where each event
occurred, we kept the event’s <code>borough</code> and
<code>location_type</code>. Program-level descriptors included
<code>event_type</code> and <code>category</code>, both of which
summarize the content and purpose of the activity.</p></li>
<li><p><strong>Processing the inconsistent audience field:</strong> The
raw <code>audience</code> column included messy and inconsistent lists
(e.g., “Children; Adults; Seniors; General Public”). We split these
entries into cleaned lists and constructed three meaningful
accessibility indicators:</p>
<ul>
<li><p><code>kids_friendly</code>: event includes Children/Kids/Tot or
is labeled General Public</p></li>
<li><p><code>senior_friendly</code>: event includes Seniors or General
Public</p></li>
<li><p><code>adults_only</code>: event does not qualify as
kids_friendly</p></li>
</ul>
<p>These binary variables allow us to capture important differences in
event targeting despite inconsistencies in the raw text.</p></li>
<li><p><strong>Cleaning and filtering attendance:</strong>
<code>Attendance</code> values were converted to numeric and events with
missing or empty attendance, event type, or category were removed. We
also restricted the dataset to events occurring on or after June 1,
2021, reflecting a period when park programming had largely resumed
after COVID-related disruptions.</p></li>
<li><p><strong>Removing unnecessary variables:</strong> To streamline
our analytic dataset, we dropped administrative or unused columns such
as unit, group_name_partner, source, and intermediate
audience-processing fields.</p></li>
</ul>
<p>After cleaning, we have 2447 observations and 15 variables. These
steps produced a tidy dataset aligned with our study.</p>
<div id="summary" class="section level4">
<h4>Summary</h4>
<table>
<colgroup>
<col width="20%" />
<col width="40%" />
<col width="40%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Step</th>
<th align="left">Description</th>
<th align="left">Key Outcome</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Variable Standardization</td>
<td align="left">Cleaned column names and parsed date-time fields</td>
<td align="left">Structured <code>date</code>, <code>year</code>,
<code>month</code>, <code>day</code>, <code>time</code></td>
</tr>
<tr class="even">
<td align="left">Derived Temporal Features</td>
<td align="left">Created <code>season</code> and
<code>time_period</code></td>
<td align="left">Enabled analysis by time and season</td>
</tr>
<tr class="odd">
<td align="left">Audience Standardization</td>
<td align="left">Generated demographic flags</td>
<td align="left">Classified events by inclusivity</td>
</tr>
<tr class="even">
<td align="left">Filtering &amp; Reduction</td>
<td align="left">Dropped irrelevant or missing data</td>
<td align="left">2447 valid records retained</td>
</tr>
<tr class="odd">
<td align="left">Final Dataset</td>
<td align="left">Tidy data for analysis</td>
<td align="left">15 variables across all boroughs</td>
</tr>
</tbody>
</table>
<hr />
</div>
</div>
<div id="descriptive-analysis" class="section level2">
<h2>Descriptive Analysis</h2>
<div id="attendance-summary" class="section level3">
<h3>Attendance Summary</h3>
<table>
<caption>Table1: Total Attendance Summary</caption>
<thead>
<tr class="header">
<th align="right">Mean</th>
<th align="right">Median</th>
<th align="right">SD</th>
<th align="right">Min</th>
<th align="right">Max</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">74.44</td>
<td align="right">39</td>
<td align="right">100.95</td>
<td align="right">0</td>
<td align="right">861</td>
</tr>
</tbody>
</table>
<p><img src="Project_Report_files/figure-html/unnamed-chunk-2-1.png" width="60%" style="display: block; margin: auto;" /></p>
<p>Across all post-COVID events, the average attendance was
approximately <strong>74.4</strong> participants, with a median of
<strong>39</strong>.<br />
Attendance ranged from <strong>0</strong> to <strong>861</strong>,
reflecting a right-skewed distribution dominated by small community
events and a limited number of very large gatherings. This spread
highlights the diversity of NYC Parks programming—from intimate
neighborhood activities to large-scale public festivals.</p>
<table style="width:100%;">
<caption>Table 2: Attendance Summary by Subgroup</caption>
<colgroup>
<col width="17%" />
<col width="29%" />
<col width="7%" />
<col width="8%" />
<col width="8%" />
<col width="8%" />
<col width="5%" />
<col width="5%" />
<col width="8%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Variable</th>
<th align="left">Level</th>
<th align="right">Count</th>
<th align="right">Mean</th>
<th align="right">Median</th>
<th align="right">SD</th>
<th align="right">Min</th>
<th align="right">Max</th>
<th align="right">Sum</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">season</td>
<td align="left">Spring</td>
<td align="right">280</td>
<td align="right">98.29</td>
<td align="right">60.0</td>
<td align="right">120.07</td>
<td align="right">0</td>
<td align="right">800</td>
<td align="right">27522</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">Summer</td>
<td align="right">1466</td>
<td align="right">66.34</td>
<td align="right">32.0</td>
<td align="right">93.40</td>
<td align="right">0</td>
<td align="right">800</td>
<td align="right">97259</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Fall</td>
<td align="right">621</td>
<td align="right">84.15</td>
<td align="right">47.0</td>
<td align="right">105.48</td>
<td align="right">0</td>
<td align="right">861</td>
<td align="right">52258</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">Winter</td>
<td align="right">80</td>
<td align="right">63.99</td>
<td align="right">16.0</td>
<td align="right">106.96</td>
<td align="right">0</td>
<td align="right">700</td>
<td align="right">5119</td>
</tr>
<tr class="odd">
<td align="left">time_period</td>
<td align="left">Morning</td>
<td align="right">236</td>
<td align="right">47.80</td>
<td align="right">22.0</td>
<td align="right">74.54</td>
<td align="right">0</td>
<td align="right">550</td>
<td align="right">11281</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">Afternoon</td>
<td align="right">1070</td>
<td align="right">79.83</td>
<td align="right">35.0</td>
<td align="right">114.24</td>
<td align="right">0</td>
<td align="right">861</td>
<td align="right">85418</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Night</td>
<td align="right">730</td>
<td align="right">71.51</td>
<td align="right">40.0</td>
<td align="right">96.83</td>
<td align="right">0</td>
<td align="right">800</td>
<td align="right">52200</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">Midnight</td>
<td align="right">411</td>
<td align="right">80.92</td>
<td align="right">55.0</td>
<td align="right">79.83</td>
<td align="right">0</td>
<td align="right">500</td>
<td align="right">33259</td>
</tr>
<tr class="odd">
<td align="left">borough</td>
<td align="left">Bronx</td>
<td align="right">879</td>
<td align="right">52.32</td>
<td align="right">24.0</td>
<td align="right">77.03</td>
<td align="right">0</td>
<td align="right">501</td>
<td align="right">45993</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">Brooklyn</td>
<td align="right">310</td>
<td align="right">69.64</td>
<td align="right">50.0</td>
<td align="right">76.74</td>
<td align="right">0</td>
<td align="right">329</td>
<td align="right">21588</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Manhattan</td>
<td align="right">563</td>
<td align="right">98.50</td>
<td align="right">60.0</td>
<td align="right">111.12</td>
<td align="right">0</td>
<td align="right">800</td>
<td align="right">55457</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">Queens</td>
<td align="right">415</td>
<td align="right">84.14</td>
<td align="right">48.0</td>
<td align="right">107.52</td>
<td align="right">0</td>
<td align="right">861</td>
<td align="right">34917</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Staten Island</td>
<td align="right">280</td>
<td align="right">86.44</td>
<td align="right">33.0</td>
<td align="right">138.22</td>
<td align="right">0</td>
<td align="right">800</td>
<td align="right">24203</td>
</tr>
<tr class="even">
<td align="left">event_type</td>
<td align="left">Agency Produced Event</td>
<td align="right">563</td>
<td align="right">49.39</td>
<td align="right">16.0</td>
<td align="right">105.01</td>
<td align="right">0</td>
<td align="right">861</td>
<td align="right">27805</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Community Based Event</td>
<td align="right">1564</td>
<td align="right">83.67</td>
<td align="right">50.0</td>
<td align="right">97.20</td>
<td align="right">0</td>
<td align="right">800</td>
<td align="right">130858</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">Local Event</td>
<td align="right">300</td>
<td align="right">71.62</td>
<td align="right">27.5</td>
<td align="right">104.93</td>
<td align="right">0</td>
<td align="right">556</td>
<td align="right">21485</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Open House</td>
<td align="right">9</td>
<td align="right">104.44</td>
<td align="right">50.0</td>
<td align="right">111.17</td>
<td align="right">5</td>
<td align="right">345</td>
<td align="right">940</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">Tournament/Competition</td>
<td align="right">11</td>
<td align="right">97.27</td>
<td align="right">85.0</td>
<td align="right">84.25</td>
<td align="right">16</td>
<td align="right">261</td>
<td align="right">1070</td>
</tr>
<tr class="odd">
<td align="left">location_type</td>
<td align="left">Nature Center</td>
<td align="right">7</td>
<td align="right">39.29</td>
<td align="right">25.0</td>
<td align="right">41.68</td>
<td align="right">5</td>
<td align="right">130</td>
<td align="right">275</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">Other</td>
<td align="right">134</td>
<td align="right">96.75</td>
<td align="right">73.0</td>
<td align="right">103.14</td>
<td align="right">0</td>
<td align="right">800</td>
<td align="right">12964</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Park</td>
<td align="right">1213</td>
<td align="right">86.95</td>
<td align="right">45.0</td>
<td align="right">115.16</td>
<td align="right">0</td>
<td align="right">861</td>
<td align="right">105465</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">Playground</td>
<td align="right">446</td>
<td align="right">58.97</td>
<td align="right">37.5</td>
<td align="right">67.70</td>
<td align="right">0</td>
<td align="right">485</td>
<td align="right">26300</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Pool</td>
<td align="right">249</td>
<td align="right">20.14</td>
<td align="right">13.0</td>
<td align="right">29.38</td>
<td align="right">0</td>
<td align="right">300</td>
<td align="right">5016</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">Recreation Center</td>
<td align="right">315</td>
<td align="right">61.35</td>
<td align="right">35.0</td>
<td align="right">78.18</td>
<td align="right">0</td>
<td align="right">550</td>
<td align="right">19326</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">School</td>
<td align="right">83</td>
<td align="right">154.36</td>
<td align="right">112.0</td>
<td align="right">138.28</td>
<td align="right">5</td>
<td align="right">715</td>
<td align="right">12812</td>
</tr>
</tbody>
</table>
<p>Table 2 shows attendance varied substantially across time, seasons,
and event characteristics. Most events took place in Summer and Fall,
reflecting NYC’s outdoor activity trends. Afternoon events had the
largest counts, followed by Night. Attendance also differed across
boroughs and event types, with parks and community events supporting the
greatest participation. These subgroup summaries provide essential
baseline context for downstream modeling.</p>
<hr />
</div>
<div id="attendance-patterns-across-categories" class="section level3">
<h3>Attendance Patterns Across Categories</h3>
<p><img src="Project_Report_files/figure-html/unnamed-chunk-4-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p><em>The violin shapes represent the full distribution of attendance
within each category, while the internal boxplots mark median and
interquartile ranges. For interpretability, the y-axis is truncated at
<strong>250 attendees</strong>, encompassing the majority of events and
minimizing distortion from a few extremely large gatherings.</em></p>
<p>The figure above presents violin–boxplots showing attendance
distributions across major event characteristics:</p>
<ul>
<li><strong>Season:</strong> Attendance is right-skewed in all seasons.
Spring and fall events show slightly higher median attendance and more
variability compared to summer and winter. This pattern likely reflects
more comfortable weather conditions, which make outdoor programming more
appealing and accessible.</li>
<li><strong>Time of Day:</strong> Night and midnight events have larger
audiences as well as larger variations.<br />
</li>
<li><strong>Borough:</strong> Brooklyn and Manhattan exhibit larger
spreads and more high-attendance events. Staten Island and the Bronx
tend to have lower medians, suggesting geographic differences in program
scale or population density.</li>
<li><strong>Audience Type:</strong> Adults-only events have the lowest
median attendance and a relatively compact distribution. Kids-friendly
and senior-friendly events show wider spreads, with both groups
including numerous higher-attendance outliers. This suggests that events
designed for families or seniors may draw more participants than
strictly adult-oriented programming.</li>
<li><strong>Event Type:</strong> Community-based, open house, and
competetion events show higher medians and wider distributions, whereas
agency-sponsored or local events tend to draw smaller and more
consistent crowds.</li>
<li><strong>Location Type:</strong> School-based events show the highest
median attendance and the widest spread, indicating frequent large
gatherings. Parks and playgrounds also show a broad distribution with
many mid- to high-attendance events. In contrast, nature centers and
pools tend to host smaller events, with lower medians and tighter
distributions.</li>
</ul>
<hr />
</div>
<div id="audience-targeting-by-borough" class="section level3">
<h3>Audience Targeting by Borough</h3>
<p>To understand how NYC Parks programs are designed for different
groups, we analyzed event audience targeting across boroughs and months.
Using the cleaned audience-type indicators (Adults-only, Kids-friendly,
and Senior-friendly), the stacked bar charts below show the proportion
of events targeting each group across boroughs and months.</p>
<p><img src="Project_Report_files/figure-html/unnamed-chunk-5-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p>The left chart illustrates how event targeting varies across the five
boroughs:</p>
<ul>
<li><p>Kids-friendly events make up the majority of programming in every
borough. This reflects NYC Parks’ emphasis on family-oriented and
child-inclusive events.</p></li>
<li><p>Senior-friendly events also represent a large share, generally
40–45% of all events, indicating strong support for older adult
engagement citywide.</p></li>
<li><p>Adults-only events are the smallest category, usually under 15%.
This suggests that most park events are intended to be inclusive rather
than restricted to adults.</p>
<p>Although boroughs differ slightly (e.g., Manhattan host the least
adults-only events overall), event targeting is highly consistent across
boroughs, reflecting similar programming priorities citywide.</p></li>
</ul>
<p>The right chart shows how event targeting shifts throughout the
calendar year:</p>
<ul>
<li><p>Kids-friendly events dominate in all months, but the proportion
is lower in winter and early spring (Jan–Mar) and higher in summer and
early fall (Jun–Sep).</p></li>
<li><p>Senior-friendly events show a seasonal rise, increasing steadily
from spring into late summer. Warmer months may support more
senior-accessible outdoor programming.</p></li>
<li><p>Adults-only events fluctuate modestly, with slightly higher
proportions in winter, possibly reflecting specific seasonal event
types.</p>
<p>These patterns suggest that NYC Parks adjusts event design
seasonally, offering more inclusive and multigenerational programming
during peak outdoor months.</p></li>
</ul>
<hr />
</div>
<div id="seasonal-attendance-analysis" class="section level3">
<h3>Seasonal Attendance Analysis</h3>
<p>To investigate how event participation fluctuates with seasonal and
temporal factors, we analyzed mean attendance patterns by both
<strong>time of day</strong> and <strong>borough</strong>, stratified
across the four seasons. These comparisons highlight the interplay
between seasonal climate conditions, event scheduling, and geographic
context in shaping NYC Parks’ public engagement.</p>
<p><img src="Project_Report_files/figure-html/unnamed-chunk-6-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p>Figure 3A: Mean Attendance by Time of Day Across Seasons</p>
<ul>
<li>Spring and fall has the highest attendance in the morning and
afternoon.</li>
<li>Summer attendance gradually increases throughout the day, with the
highest turnout at midnight.</li>
<li>Winter attendance is lowest, with a steep drop at midnight.</li>
</ul>
<p>Figure 3B: Mean Attendance by Season Across Boroughs</p>
<ul>
<li>Spring is the strongest season for most boroughs, especially
Brooklyn and Staten Island.</li>
<li>Summer attendance dips across all boroughs except for
Manhattan.</li>
<li>Fall rebounds except for Brooklyn, with Queens showing high
participation.</li>
<li>Winter attendance declines everywhere, with the Bronx showing the
lowest turnout.</li>
</ul>
<p>Across NYC Parks events, attendance varies meaningfully by both
season and location. Spring and fall afternoons draw the highest
engagement, while winter events attract substantially smaller crowds.
Borough-level differences are also pronounced: Queens consistently
attracts larger audiences in both fall and winter, whereas the Bronx
shows the lowest attendance across all seasons.</p>
<hr />
</div>
<div id="attendance-over-the-calendar-year" class="section level3">
<h3>Attendance Over the Calendar Year</h3>
<p><img src="Project_Report_files/figure-html/unnamed-chunk-7-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p>Figure 4 illustrates how attendance at NYC Parks events changes
across the calendar year. Each grey point represents attendance at an
individual event, while the blue line shows the monthly mean,
highlighting broader seasonal patterns that daily fluctuations may
obscure. This combined view provides both the overall seasonal trend and
the variability within each month.</p>
<p>Attendance is lowest in February and increases sharply through March
and April, reflecting improving weather and expanded outdoor
programming. Attendance levels remain moderate and relatively steady
from May to June, with a decline in July likely due to extreme heat or
travel patterns. Participation increases again in September–October,
with October showing the highest average attendance levels of the year.
December shows another uptick, consistent with holiday-themed
programming and community events.</p>
<p>It is important to note a wide within-month variability. The vertical
spread of grey points indicates that months include a mix of small-scale
events and occasional large gatherings.</p>
<hr />
</div>
</div>
<div id="modeling" class="section level2">
<h2>Modeling</h2>
<div id="modeling-workflow-diagram" class="section level3">
<h3>Modeling Workflow Diagram</h3>
<pre><code>                     ┌──────────────────────────────────┐
                     │  Exploratory Data Analysis (EDA) │
                     │  - Histogram of attendance       │
                     │  - mean–variance check           │
                     │  → Identify skewness &amp; overdispersion
                     └──────────────────────────────────┘
                                     │
                                     ▼
               ┌───────────────────────────────────────────────┐
               │ Univariate Analysis                           │
               │ - Kruskal–Wallis tests for each predictor     │
               │ - Compute η² effect sizes                     │
               │ → Assess which predictors show meaningful     │
               │   variation in attendance                     │
               └───────────────────────────────────────────────┘
                                     │
                                     ▼
         ┌──────────────────────────────────────────────────────────┐
         │ Model Building: Cross-Validated Variable Selection       │
         │ - Define Simple, Medium, Full predictor sets             │
         │ - Monte Carlo CV with RMSE as performance metric         │
         │ → Select predictor set with best out-of-sample RMSE      │
         └──────────────────────────────────────────────────────────┘
                                     │
                                     ▼
         ┌──────────────────────────────────────────────────────────┐
         │ Final Model Fitting                                      │
         │ - Fit Negative Binomial regression using selected vars   │
         │ - Extract IRRs and confidence intervals                  │
         │ → Interpret effect sizes and direction of associations   │
         └──────────────────────────────────────────────────────────┘
                                     │
                                     ▼
               ┌───────────────────────────────────────────────┐
               │ Final Inference &amp; Interpretation              │
               │ - Discuss strongest predictors                │
               │ - Compare event characteristics &amp; attendance  │
               │ - Guide practical recommendations             │
               └───────────────────────────────────────────────┘</code></pre>
<hr />
</div>
<div id="exploratory-distribution-plots" class="section level3">
<h3>Exploratory distribution plots</h3>
<p>Before conducting formal statistical analyses, we examined the
distribution of the outcome variable, attendance, to assess its shape
and variability. Understanding the distribution is essential for
determining whether parametric assumptions are met and for selecting an
appropriate modeling framework.<br />
<img src="Project_Report_files/figure-html/unnamed-chunk-8-1.png" width="100%" style="display: block; margin: auto;" /></p>
<table>
<caption>Mean and Variance of Event Attendance</caption>
<thead>
<tr class="header">
<th align="right">Mean Attendance</th>
<th align="right">Variance of Attendance</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">74.44</td>
<td align="right">10191.33</td>
</tr>
</tbody>
</table>
<p>Exploratory plots revealed that attendance is highly right-skewed
with a long tail, and the variance greatly exceeds the mean, indicating
overdispersion. These characteristics justify the use of non-parametric
tests in the univariate stage and a Negative Binomial model for the
final multivariable analysis.</p>
<hr />
</div>
<div id="univariate-analysis" class="section level3">
<h3>Univariate Analysis</h3>
<p>We first examined whether attendance differed across levels of each
categorical predictor (season, time of day, borough, event type,
location type, and audience-related indicators) using the Kruskal–Wallis
test, a non-parametric method appropriate for skewed count outcomes. For
each variable, we also computed an η² effect size to quantify the
magnitude of group differences. These results provide an initial
assessment of which predictors meaningfully explain variation in
attendance and should be considered in subsequent multivariable
modeling.</p>
<table>
<caption>Kruskal–Wallis Test Results: P-values and Effect Size
Classification</caption>
<thead>
<tr class="header">
<th align="left">variable</th>
<th align="left">p.value</th>
<th align="left">effect_strength</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">season</td>
<td align="left">3.73e-10</td>
<td align="left">small</td>
</tr>
<tr class="even">
<td align="left">time_period</td>
<td align="left">3.22e-10</td>
<td align="left">small</td>
</tr>
<tr class="odd">
<td align="left">borough</td>
<td align="left">1.29e-29</td>
<td align="left">small</td>
</tr>
<tr class="even">
<td align="left">event_type</td>
<td align="left">1.31e-39</td>
<td align="left">medium</td>
</tr>
<tr class="odd">
<td align="left">location_type</td>
<td align="left">2.51e-50</td>
<td align="left">medium</td>
</tr>
<tr class="even">
<td align="left">kids_friendly</td>
<td align="left">1.36e-08</td>
<td align="left">small</td>
</tr>
<tr class="odd">
<td align="left">senior_friendly</td>
<td align="left">1.02e-09</td>
<td align="left">small</td>
</tr>
<tr class="even">
<td align="left">adults_only</td>
<td align="left">1.36e-08</td>
<td align="left">small</td>
</tr>
</tbody>
</table>
<p>Across all predictors, the Kruskal–Wallis tests indicated
statistically significant differences in attendance (p &lt; 0.05), with
effect sizes ranging from very small to medium. Variables with medium η²
values (event type and location type) show stronger associations with
attendance and were prioritized for inclusion in the multivariable
model.</p>
<p>To evaluate their combined predictive value and adjust for potential
confounding, we proceeded to build multivariable models.</p>
<hr />
</div>
<div id="multivariable-model-negative-binomial-regression"
class="section level3">
<h3>Multivariable Model: Negative Binomial Regression</h3>
<p>To identify the predictors that best explain variation in attendance,
we compared several candidate models using cross-validated RMSE, an
unbiased measure of out-of-sample predictive performance. We used
log-linear models for this stage because they are computationally stable
and well-suited for repeated Monte Carlo cross-validation. Based on the
RMSE comparison, we selected the most predictive set of variables and
then refit the final model using Negative Binomial regression, which is
appropriate for inference with overdispersed count outcomes such as
attendance.</p>
<table>
<thead>
<tr class="header">
<th align="left">model</th>
<th align="right">mean_RMSE</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Simple</td>
<td align="right">1.46</td>
</tr>
<tr class="even">
<td align="left">Medium</td>
<td align="right">1.43</td>
</tr>
<tr class="odd">
<td align="left">Full</td>
<td align="right">1.43</td>
</tr>
</tbody>
</table>
<p>Cross-validated RMSE values were similar across the three candidate
models, with the Full model achieving the lowest prediction error (RMSE
= 1.4263). Although the difference is modest, the Full model provided
the best out-of-sample predictive performance and was therefore selected
for the final analysis.</p>
<p>Using the selected predictor set, we fit our final model with a
Negative Binomial regression:</p>
<table style="width:100%;">
<caption>Negative Binomial Model Results</caption>
<colgroup>
<col width="37%" />
<col width="10%" />
<col width="11%" />
<col width="11%" />
<col width="8%" />
<col width="10%" />
<col width="11%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">term</th>
<th align="right">estimate</th>
<th align="right">std.error</th>
<th align="right">statistic</th>
<th align="right">p.value</th>
<th align="right">conf.low</th>
<th align="right">conf.high</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">14.165</td>
<td align="right">0.479</td>
<td align="right">5.533</td>
<td align="right">0.000</td>
<td align="right">6.217</td>
<td align="right">41.094</td>
</tr>
<tr class="even">
<td align="left">seasonSummer</td>
<td align="right">0.908</td>
<td align="right">0.090</td>
<td align="right">-1.073</td>
<td align="right">0.283</td>
<td align="right">0.758</td>
<td align="right">1.083</td>
</tr>
<tr class="odd">
<td align="left">seasonFall</td>
<td align="right">0.933</td>
<td align="right">0.095</td>
<td align="right">-0.730</td>
<td align="right">0.466</td>
<td align="right">0.773</td>
<td align="right">1.122</td>
</tr>
<tr class="even">
<td align="left">seasonWinter</td>
<td align="right">0.718</td>
<td align="right">0.154</td>
<td align="right">-2.146</td>
<td align="right">0.032</td>
<td align="right">0.535</td>
<td align="right">0.980</td>
</tr>
<tr class="odd">
<td align="left">time_periodAfternoon</td>
<td align="right">1.357</td>
<td align="right">0.090</td>
<td align="right">3.412</td>
<td align="right">0.001</td>
<td align="right">1.130</td>
<td align="right">1.623</td>
</tr>
<tr class="even">
<td align="left">time_periodNight</td>
<td align="right">1.254</td>
<td align="right">0.095</td>
<td align="right">2.376</td>
<td align="right">0.018</td>
<td align="right">1.034</td>
<td align="right">1.514</td>
</tr>
<tr class="odd">
<td align="left">time_periodMidnight</td>
<td align="right">1.168</td>
<td align="right">0.105</td>
<td align="right">1.487</td>
<td align="right">0.137</td>
<td align="right">0.948</td>
<td align="right">1.435</td>
</tr>
<tr class="even">
<td align="left">boroughBrooklyn</td>
<td align="right">1.133</td>
<td align="right">0.086</td>
<td align="right">1.449</td>
<td align="right">0.147</td>
<td align="right">0.961</td>
<td align="right">1.341</td>
</tr>
<tr class="odd">
<td align="left">boroughManhattan</td>
<td align="right">1.635</td>
<td align="right">0.073</td>
<td align="right">6.694</td>
<td align="right">0.000</td>
<td align="right">1.427</td>
<td align="right">1.876</td>
</tr>
<tr class="even">
<td align="left">boroughQueens</td>
<td align="right">1.249</td>
<td align="right">0.075</td>
<td align="right">2.979</td>
<td align="right">0.003</td>
<td align="right">1.080</td>
<td align="right">1.448</td>
</tr>
<tr class="odd">
<td align="left">boroughStaten Island</td>
<td align="right">1.402</td>
<td align="right">0.086</td>
<td align="right">3.932</td>
<td align="right">0.000</td>
<td align="right">1.189</td>
<td align="right">1.660</td>
</tr>
<tr class="even">
<td align="left">event_typeCommunity Based Event</td>
<td align="right">1.334</td>
<td align="right">0.070</td>
<td align="right">4.107</td>
<td align="right">0.000</td>
<td align="right">1.160</td>
<td align="right">1.531</td>
</tr>
<tr class="odd">
<td align="left">event_typeLocal Event</td>
<td align="right">1.032</td>
<td align="right">0.096</td>
<td align="right">0.328</td>
<td align="right">0.743</td>
<td align="right">0.855</td>
<td align="right">1.248</td>
</tr>
<tr class="even">
<td align="left">event_typeOpen House</td>
<td align="right">1.244</td>
<td align="right">0.412</td>
<td align="right">0.529</td>
<td align="right">0.597</td>
<td align="right">0.602</td>
<td align="right">3.110</td>
</tr>
<tr class="odd">
<td align="left">event_typeTournament/Competition</td>
<td align="right">2.144</td>
<td align="right">0.369</td>
<td align="right">2.065</td>
<td align="right">0.039</td>
<td align="right">1.108</td>
<td align="right">4.849</td>
</tr>
<tr class="even">
<td align="left">location_typeOther</td>
<td align="right">2.096</td>
<td align="right">0.473</td>
<td align="right">1.565</td>
<td align="right">0.118</td>
<td align="right">0.724</td>
<td align="right">4.764</td>
</tr>
<tr class="odd">
<td align="left">location_typePark</td>
<td align="right">1.992</td>
<td align="right">0.463</td>
<td align="right">1.488</td>
<td align="right">0.137</td>
<td align="right">0.699</td>
<td align="right">4.407</td>
</tr>
<tr class="even">
<td align="left">location_typePlayground</td>
<td align="right">1.303</td>
<td align="right">0.467</td>
<td align="right">0.567</td>
<td align="right">0.571</td>
<td align="right">0.455</td>
<td align="right">2.910</td>
</tr>
<tr class="odd">
<td align="left">location_typePool</td>
<td align="right">0.554</td>
<td align="right">0.470</td>
<td align="right">-1.255</td>
<td align="right">0.210</td>
<td align="right">0.192</td>
<td align="right">1.248</td>
</tr>
<tr class="even">
<td align="left">location_typeRecreation Center</td>
<td align="right">1.302</td>
<td align="right">0.466</td>
<td align="right">0.566</td>
<td align="right">0.571</td>
<td align="right">0.455</td>
<td align="right">2.903</td>
</tr>
<tr class="odd">
<td align="left">location_typeSchool</td>
<td align="right">3.991</td>
<td align="right">0.479</td>
<td align="right">2.890</td>
<td align="right">0.004</td>
<td align="right">1.366</td>
<td align="right">9.224</td>
</tr>
<tr class="even">
<td align="left">kids_friendlyTRUE</td>
<td align="right">1.741</td>
<td align="right">0.094</td>
<td align="right">5.918</td>
<td align="right">0.000</td>
<td align="right">1.454</td>
<td align="right">2.074</td>
</tr>
<tr class="odd">
<td align="left">senior_friendlyTRUE</td>
<td align="right">1.053</td>
<td align="right">0.064</td>
<td align="right">0.803</td>
<td align="right">0.422</td>
<td align="right">0.932</td>
<td align="right">1.187</td>
</tr>
</tbody>
</table>
<p>In this model, attendance is modeled as a function of season, time of
day, borough, event type, location type, and audience indicators. We
exponentiate the coefficients to obtain incidence rate ratios (IRRs) and
95% confidence intervals, which quantify the multiplicative change in
expected attendance associated with each predictor while holding the
others constant.</p>
<p>The Negative Binomial model shows that several event characteristics
are strongly associated with attendance. Compared with spring events,
winter events have significantly lower expected attendance (IRR = 0.72,
95% CI: 0.53–0.98), while summer and fall do not differ significantly
from spring.</p>
<p>Afternoon and night events attract more participants than morning
events (Afternoon: IRR = 1.36, 95% CI: 1.13–1.62; Night: IRR = 1.25, 95%
CI: 1.03–1.51). Relative to Bronx, events in Manhattan, Queens, and
Staten Island show higher attendance (IRRs ≈ 1.25-1.64), with Manhattan
having the largest effect.</p>
<p>Community-based events have higher attendance than Agency Produced
events (IRR = 1.33, 95% CI: 1.16–1.53), and events held in schools and
parks are particularly well-attended (School: IRR = 3.99, 95% CI:
1.37–9.22; Park: IRR = 1.99, 95% CI: 0.70–4.41).</p>
<p>For the audience, the kids-friendly and senior-friendly indicators
are not individually significant after adjustment for other
covariates.</p>
<p><img src="Project_Report_files/figure-html/unnamed-chunk-15-1.png" width="100%" style="display: block; margin: auto;" /></p>
</div>
</div>
<div id="discussion" class="section level2">
<h2>Discussion</h2>
<p>This project provides insight into how seasonal, temporal,
geographic, and programmatic factors shape public participation in NYC
Parks events. Descriptively, attendance was highly variable and
right-skewed, with spring and fall events—especially in the morning and
afternoon—drawing the highest engagement. Borough-level differences were
substantial: Queens attracted larger audiences in fall and winter, while
the Bronx had the lowest turnout, suggesting uneven distribution of
community engagement across the city.</p>
<p>Multivariable Negative Binomial modeling clarified which
characteristics independently predict attendance. After adjustment,
winter events had significantly lower expected attendance, and afternoon
and night events drew more participants than morning events. Borough
differences persisted, with Manhattan, Queens, and Staten Island showing
higher expected attendance relative to the Bronx. Community-based and
competition-style events attracted significantly more participants, and
events held in schools or parks had the strongest positive associations.
Adults-only events consistently drew fewer participants, reinforcing the
importance of family-inclusive programming.</p>
<p>Overall, these findings highlight actionable opportunities for NYC
Parks. Strengthening winter programming, expanding family-oriented
events, and leveraging high-performing locations such as schools and
parks may help increase turnout. Borough disparities also suggest a need
for targeted outreach and resource allocation to support
lower-attendance areas.</p>
<div id="limitations" class="section level3">
<h3>Limitations</h3>
<p>This analysis is based on the dataset available as of December 4,
2025, which continues to update over time; therefore, results reflect
only a snapshot rather than the full evolving dataset. Additionally, the
models do not incorporate external factors such as weather, neighborhood
socioeconomic characteristics, or event marketing reach, which may also
influence attendance and could be explored in future work.</p>
</div>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("hide" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
